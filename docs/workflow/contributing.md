# 贡献指南

本指南帮助你了解如何为 ChatFold 项目做出贡献。

## 开发流程

### 1. 获取代码

```bash
# Fork 项目到你的 GitHub 账号
# 然后克隆到本地
git clone <your-fork-url>
cd ChatFold-MVP

# 添加上游仓库
git remote add upstream <original-repo-url>
```

### 2. 创建分支

```bash
# 同步主分支
git checkout main
git pull upstream main

# 创建功能分支
git checkout -b feat/your-feature-name
```

分支命名规范：

| 前缀        | 用途     | 示例                   |
| ----------- | -------- | ---------------------- |
| `feat/`     | 新功能   | `feat/dark-mode`       |
| `fix/`      | Bug 修复 | `fix/login-error`      |
| `docs/`     | 文档更新 | `docs/api-guide`       |
| `refactor/` | 重构     | `refactor/auth-module` |
| `test/`     | 测试     | `test/api-coverage`    |

### 3. 开发和测试

```bash
# 后端
cd backend
uv sync
uv run pytest

# 前端
cd web
npm install
npm run lint
npm run build
```

### 4. 提交代码

遵循下方的 Commit 规范提交代码。

## Commit 规范

### 格式

```
type: subject (max 50 chars, no punctuation)

Changes:
- Specific change 1
- Specific change 2

Benefits:
- Improvement 1
- Improvement 2
```

### Type 类型

| 类型       | 说明                         |
| ---------- | ---------------------------- |
| `feat`     | 新功能                       |
| `fix`      | Bug 修复                     |
| `docs`     | 文档更新                     |
| `style`    | 代码格式（不影响功能）       |
| `refactor` | 重构（不新增功能或修复 bug） |
| `perf`     | 性能优化                     |
| `test`     | 测试相关                     |
| `build`    | 构建系统或依赖               |
| `chore`    | 其他杂项                     |

### 示例

```
feat: add SSE streaming for folding progress

Changes:
- Add /tasks/{id}/stream endpoint
- Implement Redis event queue
- Create useFoldingTask hook

Benefits:
- Real-time progress updates
- Better user experience
```

### 要求

- **语言**: 仅使用英文
- **主题行**: 最多 50 字符，不加句号
- **正文**: 说明改动内容和带来的好处
- **禁止**: 不添加 "Generated by" 或 "Co-authored-by" 字段

## 代码规范

### Python (后端)

```bash
# 使用 ruff 检查
uv run ruff check .

# 自动修复
uv run ruff check . --fix
```

关键规范：

- 使用 type hints
- Pydantic 模型用于数据验证
- 异步函数使用 `async/await`

### TypeScript (前端)

```bash
# ESLint 检查
npm run lint

# 自动修复
npm run lint -- --fix
```

关键规范：

- 使用 TypeScript 严格模式
- React 组件使用函数式 + Hooks
- 状态管理使用 Zustand

## 测试要求

### 后端测试

```bash
cd backend
uv run pytest
uv run pytest --cov=app  # 覆盖率
```

### 前端测试

```bash
cd web
npm run test
```

## 问题反馈

### 报告 Bug

请提供：

1. 问题描述
2. 复现步骤
3. 期望行为
4. 实际行为
5. 环境信息（OS, Node/Python 版本）

### 功能建议

请说明：

1. 功能描述
2. 使用场景
3. 预期效果

---

**更新日期**: 2025-01-01
